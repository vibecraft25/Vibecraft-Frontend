# VibeCraft í”„ë¡œì íŠ¸ ì—…ë°ì´íŠ¸ ìš”ì•½ ë° ì™„ì„± ê°€ì´ë“œ

## ğŸ“‹ ìµœì‹  ì—…ë°ì´íŠ¸ ë‚´ìš© (2025.08.09)

### ğŸ—ï¸ ì €ì¥ì†Œ êµ¬ì¡° ëŒ€í­ ê°œì„  ë° ë‹¨ìˆœí™” ì™„ë£Œ

- **ì €ì¥ì†Œ ë¶„ë¦¬**: IndexedDB(ë©”ì‹œì§€) + localStorage(ë©”íƒ€ì •ë³´) ìµœì í™”ëœ êµ¬ì¡°
- **ì¤‘ë³µ ì €ì¥ì†Œ ì œê±°**: `vibecraft-chat-store` ì œê±°í•˜ì—¬ ì €ì¥ì†Œ ë‹¨ì¼í™”
- **ì±„íŒ… ë¡œì§ ë³´ì¡´**: ê¸°ì¡´ messageBuffer ì±„íŒ… ë¡œì§ ì™„ì „ ìœ ì§€í•˜ë©´ì„œ ì €ì¥ì†Œë§Œ ê°œì„ 
- **ìë™ ë§ˆì´ê·¸ë ˆì´ì…˜**: ê¸°ì¡´ ë°ì´í„° ì•ˆì „í•˜ê²Œ ìƒˆ êµ¬ì¡°ë¡œ ìë™ ë³€í™˜
- **ì„±ëŠ¥ í–¥ìƒ**: ë©”ì‹œì§€ì™€ ë©”íƒ€ë°ì´í„° ë¶„ë¦¬ë¡œ ë” ë¹ ë¥¸ ì ‘ê·¼ ë° í™•ì¥ì„± í™•ë³´

### ğŸ“ ìƒˆë¡œìš´ ì €ì¥ì†Œ ì•„í‚¤í…ì²˜

```
ğŸ“Š ë©”íƒ€ì •ë³´ (localStorage - vibecraft_thread)
â”œâ”€â”€ ChatItem[] - ì±„íŒ… ëª©ë¡, ë¹ ë¥¸ ì ‘ê·¼ í•„ìš”
â””â”€â”€ ê°€ë²¼ìš´ ë°ì´í„° (~KB ë‹¨ìœ„)

ğŸ’¬ ë©”ì‹œì§€ ë°ì´í„° (IndexedDB - vibecraft-messages-db)
â”œâ”€â”€ [threadId]: SSEMessage[] - ìŠ¤ë ˆë“œë³„ ë©”ì‹œì§€ë“¤
â”œâ”€â”€ ëŒ€ìš©ëŸ‰ ë°ì´í„° (~MB ë‹¨ìœ„)
â””â”€â”€ ë¹„ë™ê¸° ì ‘ê·¼, íš¨ìœ¨ì  ì €ì¥
```

### ğŸ”§ ì£¼ìš” ë³€ê²½ì‚¬í•­

#### 1. ì‹ ê·œ íŒŒì¼ ìƒì„±
- `utils/messageStorage.ts`: IndexedDB ì „ìš© ë©”ì‹œì§€ ì €ì¥ì†Œ
- `utils/migrationHelper.ts`: ê¸°ì¡´ ë°ì´í„° ì•ˆì „ ë§ˆì´ê·¸ë ˆì´ì…˜

#### 2. íŒŒì¼ ëŒ€í­ ìˆ˜ì •
- `stores/chatStore.ts`: persist ì œê±°, ìˆœìˆ˜ ëŸ°íƒ€ì„ ìƒíƒœë§Œ ê´€ë¦¬
- `utils/chatStorage.ts`: messages ê´€ë ¨ í•¨ìˆ˜ ì œê±°, ChatItemë§Œ ê´€ë¦¬
- `hooks/useSSE.ts`: messageBuffer ë³µêµ¬, ìƒˆ ì €ì¥ì†Œ êµ¬ì¡° ì‚¬ìš©

#### 3. ë ˆê±°ì‹œ ì •ë¦¬
- `stores/storage.ts`: ì‚¬ìš© ì¤‘ë‹¨, ë‹¨ìˆœí™”ëœ êµ¬ì¡°ë¡œ ëŒ€ì²´

### ğŸ”„ ìƒˆë¡œìš´ ë°ì´í„° í”Œë¡œìš°

```
ğŸ“± ì±„íŒ… ì§„í–‰ ì¤‘
â”œâ”€â”€ ë©”ì‹œì§€ ì…ë ¥/AI ì‘ë‹µ â†’ messageBufferì— ì¶”ê°€
â”œâ”€â”€ ì‹¤ì‹œê°„ UI ì—…ë°ì´íŠ¸ (messageBuffer í‘œì‹œ)
â””â”€â”€ ì±„ë„ ë³€ê²½ì‹œì—ë§Œ ì €ì¥ ìˆ˜í–‰

ğŸ’¾ ì €ì¥ ì‹œì  (ìë™)
â”œâ”€â”€ ìƒˆ ì±„íŒ… ì‹œì‘í•  ë•Œ
â”œâ”€â”€ ìŠ¤ë ˆë“œ ì „í™˜í•  ë•Œ  
â”œâ”€â”€ í˜ì´ì§€ ì¢…ë£Œí•  ë•Œ
â””â”€â”€ ì»´í¬ë„ŒíŠ¸ ì–¸ë§ˆìš´íŠ¸ì‹œ

ğŸ”„ ë¡œë“œ ì‹œì  (ìë™)
â”œâ”€â”€ ì•± ì‹œì‘ì‹œ ChatItems ë¡œë“œ
â”œâ”€â”€ ìŠ¤ë ˆë“œ ì „í™˜ì‹œ í•´ë‹¹ ë©”ì‹œì§€ë“¤ ë¡œë“œ
â””â”€â”€ ìƒˆ ì±„íŒ…ì‹œ ë¹ˆ ë°°ì—´ë¡œ ì´ˆê¸°í™”
```

---

## ğŸ”„ ì´ì „ ì—…ë°ì´íŠ¸ (2025.08.06) - Zustand + Persist ìƒíƒœ ê´€ë¦¬ ì‹œìŠ¤í…œ

- **ìƒíƒœ ê´€ë¦¬ í˜ì‹ **: React ë¡œì»¬ state â†’ Zustand ê¸€ë¡œë²Œ store ì™„ì „ ì „í™˜
- **ìŠ¤ë§ˆíŠ¸ ì €ì¥ì†Œ**: IndexedDB + localStorage + LZ-String ì••ì¶• (70% ìš©ëŸ‰ ì ˆì•½)
- **ë¬´í•œ ë£¨í”„ ì™„ì „ í•´ê²°**: ChatView/Chattings ì»´í¬ë„ŒíŠ¸ Maximum update depth ì—ëŸ¬ ì™„ì „ í•´ê²°
- **ìë™ ì €ì¥/ë¡œë“œ**: threadId ë³€ê²½ì‹œ ìë™ ë©”ì‹œì§€ ì €ì¥/ë³µì›
- **Props Drilling ì œê±°**: ëª¨ë“  ì£¼ìš” ì»´í¬ë„ŒíŠ¸ì—ì„œ Zustand ì§ì ‘ ì‚¬ìš©ìœ¼ë¡œ ì „í™˜

### ğŸ”§ ì•„í‚¤í…ì²˜ ëŒ€ê·œëª¨ ê°œí¸ ì™„ë£Œ

- **ë°ì´í„° êµ¬ì¡° ë¶„ë¦¬**: ChatItemì—ì„œ messages í•„ë“œ ì™„ì „ ë¶„ë¦¬
- **ë§ˆì´ê·¸ë ˆì´ì…˜ ì§€ì›**: ê¸°ì¡´ localStorage ë°ì´í„° â†’ ìƒˆë¡œìš´ êµ¬ì¡° ìë™ ë³€í™˜
- **ë©”ëª¨ë¦¬ ìµœì í™”**: í˜„ì¬ ìŠ¤ë ˆë“œë§Œ ë©”ëª¨ë¦¬ì— ìœ ì§€, ë‚˜ë¨¸ì§€ëŠ” ì €ì¥ì†Œì—ì„œ ì§€ì—° ë¡œë“œ
- **Fallback ì‹œìŠ¤í…œ**: IndexedDB ì‹¤íŒ¨ì‹œ localStorage ìë™ ì „í™˜
- **Component êµ¬ì¡° ê°œì„ **: Presentationê³¼ Container ì»´í¬ë„ŒíŠ¸ ë¶„ë¦¬

## ğŸ“Š Compact í”„ë¡œì íŠ¸ êµ¬ì¡°

### ğŸ— í™œì„± ê°œë°œ ì˜ì—­ (client/) - ì €ì¥ì†Œ ê°œì„  ì™„ë£Œ

```
client/src/
â”œâ”€â”€ pages/Main.tsx              # ë©”ì¸ í˜ì´ì§€ + Zustand store ì§ì ‘ ì—°ë™ âœ…
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ ChatView.tsx           # í†µí•© ì±„íŒ… UI (useSSEì—ì„œ messages ì œê³µ) âœ…
â”‚   â”œâ”€â”€ Chattings.tsx          # ì±„íŒ… ëª©ë¡ (useChatStore ì§ì ‘ ì‚¬ìš©) âœ…
â”‚   â”œâ”€â”€ Sidebar.tsx            # ì‚¬ì´ë“œë°” (propsë¡œ ë°ì´í„° ì „ë‹¬, í”„ë ˆì  í…Œì´ì…˜ ì „ìš©)
â”‚   â”œâ”€â”€ PromptBox.tsx          # ë©”ì‹œì§€ ì…ë ¥ì°½ (í”„ë ˆì  í…Œì´ì…˜ ì „ìš©)
â”‚   â”œâ”€â”€ Process.tsx            # ProcessStatus í‘œì‹œ/ì œì–´
â”‚   â”œâ”€â”€ Layout.tsx             # ë ˆì´ì•„ì›ƒ ë˜í¼ (í”„ë ˆì  í…Œì´ì…˜ ì „ìš©)
â”‚   â”œâ”€â”€ Intro.tsx              # ìµœì´ˆ ë°©ë¬¸ ì†Œê°œ í™”ë©´
â”‚   â”œâ”€â”€ Menu.tsx               # ğŸ†• ë©”ë‰´ ì»´í¬ë„ŒíŠ¸
â”‚   â””â”€â”€ Uploader.tsx           # íŒŒì¼ ì—…ë¡œë“œ ì»´í¬ë„ŒíŠ¸
â”œâ”€â”€ hooks/
â”‚   â””â”€â”€ useSSE.ts              # messageBuffer ë³µêµ¬, ìƒˆ ì €ì¥ì†Œ ì—°ë™ âœ…
â”œâ”€â”€ stores/                     # ğŸ†• Zustand ìƒíƒœ ê´€ë¦¬ ì™„ë£Œ
â”‚   â”œâ”€â”€ chatStore.ts           # ë‹¨ìˆœí™”ëœ ëŸ°íƒ€ì„ ìŠ¤í† ì–´ (persist ì œê±°) âœ…
â”‚   â””â”€â”€ storage.ts             # ë ˆê±°ì‹œ ì••ì¶• ì €ì¥ì†Œ (ì‚¬ìš© ì¤‘ë‹¨) âš ï¸
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ messageStorage.ts      # ğŸ†• IndexedDB ì „ìš© ë©”ì‹œì§€ ì €ì¥ì†Œ âœ…
â”‚   â”œâ”€â”€ chatStorage.ts         # ChatItem ë©”íƒ€ì •ë³´ë§Œ ê´€ë¦¬ (ë‹¨ìˆœí™”) âœ…
â”‚   â”œâ”€â”€ migrationHelper.ts     # ğŸ†• ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜ ë„êµ¬ âœ…
â”‚   â”œâ”€â”€ apiEndpoints.ts        # API ì—”ë“œí¬ì¸íŠ¸ ê´€ë¦¬
â”‚   â”œâ”€â”€ streamProcessor.ts     # SSE ìŠ¤íŠ¸ë¦¼ ì²˜ë¦¬
â”‚   â””â”€â”€ processStatus.ts       # ProcessStatus ìœ í‹¸ë¦¬í‹°
â”œâ”€â”€ types/
â”‚   â””â”€â”€ session.ts             # íƒ€ì… ì •ì˜ (SSEMessage ë“±)
â””â”€â”€ styles/index.css           # CSS ìœ í‹¸ë¦¬í‹°
```

### ğŸš« ë¹„í™œì„± ì˜ì—­

```
server/                        # âŒ ì‚¬ìš© ì¤‘ë‹¨ëœ í´ë”
.dump/                         # âŒ ì‚­ì œëœ ì†Œì¼“ ì„œë²„ ì‹œë„
```

## ğŸ¯ í•µì‹¬ ê¸°ëŠ¥ í˜„í™©

### âœ… ì™„ì„±ëœ ê¸°ëŠ¥ë“¤

1. **ê°œì„ ëœ ì €ì¥ì†Œ ì‹œìŠ¤í…œ**: IndexedDB(ë©”ì‹œì§€) + localStorage(ë©”íƒ€ì •ë³´) ë¶„ë¦¬ êµ¬ì¡°
2. **ì±„íŒ… ë¡œì§ ë³´ì¡´**: ê¸°ì¡´ messageBuffer ë¡œì§ ì™„ì „ ìœ ì§€
3. **ìë™ ë§ˆì´ê·¸ë ˆì´ì…˜**: ê¸°ì¡´ ë°ì´í„° ì•ˆì „í•˜ê²Œ ìƒˆ êµ¬ì¡°ë¡œ ë³€í™˜
4. **ë‹¨ì¼í™”ëœ ì €ì¥ì†Œ**: ì¤‘ë³µ ì €ì¥ì†Œ ì œê±°ë¡œ ë³µì¡ì„± ê°ì†Œ
5. **ì´ë²¤íŠ¸ ê¸°ë°˜ SSE ì‹œìŠ¤í…œ**: ai/complete/menu ì´ë²¤íŠ¸ ì‹¤ì‹œê°„ ì²˜ë¦¬
6. **ProcessStatus ì›Œí¬í”Œë¡œìš°**: TOPIC â†’ DATA â†’ BUILD â†’ DEPLOY ìë™ ì§„í–‰
7. **ì±„íŒ… ì„¸ì…˜ ê´€ë¦¬**: threadId ê¸°ë°˜ ì„¸ì…˜ ê´€ë¦¬ ë° íˆìŠ¤í† ë¦¬ ì™„ì „ ë¶„ë¦¬
8. **íŒŒì¼ ì—…ë¡œë“œ**: DATA ë‹¨ê³„ì—ì„œ AI ì±„íŒ… ë©”ì‹œì§€ë¡œ í†µí•©
9. **ë¬´í•œ ë£¨í”„ ì™„ì „ í•´ê²°**: Zustand selector íŒ¨í„´ìœ¼ë¡œ React ì•ˆì •ì„± ë³´ì¥
10. **Props Drilling ì œê±°**: Container/Presentation íŒ¨í„´ìœ¼ë¡œ ê¹”ë”í•œ ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°

### ğŸ”„ ìƒˆë¡œìš´ ë°ì´í„° í”Œë¡œìš°

```
ë©”ì‹œì§€ ì…ë ¥ â†’ messageBufferì— ì¶”ê°€ â†’ ì‹¤ì‹œê°„ UI ì—…ë°ì´íŠ¸ â†’ 
processStatusë³„ API í˜¸ì¶œ â†’ SSE ìŠ¤íŠ¸ë¦¼ ìˆ˜ì‹  â†’ ai ì´ë²¤íŠ¸ë¡œ ì‹¤ì‹œê°„ ì‘ë‹µ â†’ 
messageBufferì— ë©”ì‹œì§€ ì¶”ê°€ â†’ complete ì´ë²¤íŠ¸ë¡œ ë‹¤ìŒ ë‹¨ê³„ ì§„í–‰ â†’ 
ChatItem ì—…ë°ì´íŠ¸ â†’ ì±„ë„ ë³€ê²½ì‹œ IndexedDB ì €ì¥
```

## ğŸš€ ê¸°ìˆ  ìŠ¤íƒ & ì•„í‚¤í…ì²˜

### ğŸ“¦ ì£¼ìš” ì˜ì¡´ì„±

- **Frontend**: React 18 + TypeScript + Vite
- **State Management**: Zustand (ë‹¨ìˆœí™”ëœ ëŸ°íƒ€ì„ ìƒíƒœ)
- **Storage**: IndexedDB (idb) + localStorage (ë¶„ë¦¬ êµ¬ì¡°)
- **UI**: Ant Design + Tailwind CSS + Lucide Icons

### ğŸª ë‹¨ìˆœí™”ëœ Store êµ¬ì¡°

```typescript
interface ChatStore {
  // ëŸ°íƒ€ì„ ìƒíƒœë§Œ ê´€ë¦¬
  chatItems: ChatItem[];                    // ì±„íŒ… ëª©ë¡ (ë©”íƒ€ë°ì´í„°)
  currentThreadId?: string;                 // í˜„ì¬ í™œì„± ìŠ¤ë ˆë“œ

  // ì•¡ì…˜ë“¤
  loadInitialData: () => void;              // ì´ˆê¸° ë°ì´í„° ë¡œë“œ + ë§ˆì´ê·¸ë ˆì´ì…˜
  switchThread: (threadId: string) => void; // ìŠ¤ë ˆë“œ ì „í™˜ (threadIdë§Œ ì—…ë°ì´íŠ¸)
  storeChatChannel: (newItem) => void;      // ìƒˆ ì±„íŒ… ì¶”ê°€
  updateChatChannel: (...) => void;         // ì±„íŒ… ì—…ë°ì´íŠ¸
  startNewChat: () => void;                 // ìƒˆ ì±„íŒ… ì‹œì‘
  saveCurrentMessages: (messages) => void; // messageBuffer ì €ì¥
}
```

### ğŸ’¾ ê°œì„ ëœ ì €ì¥ì†Œ ì‹œìŠ¤í…œ

```typescript
ğŸ“Š localStorage (vibecraft_thread)
- ChatItems ë©”íƒ€ì •ë³´ë§Œ ì €ì¥
- ë¹ ë¥¸ ì ‘ê·¼, ê°€ë²¼ìš´ ë°ì´í„°
- { history: ChatItem[] }

ğŸ’¬ IndexedDB (vibecraft-messages-db)  
- threadIdë³„ ë©”ì‹œì§€ë“¤ ê°œë³„ ì €ì¥
- key: threadId, value: SSEMessage[]
- ëŒ€ìš©ëŸ‰ ë°ì´í„°, ë¹„ë™ê¸° ì ‘ê·¼
```

### ğŸ”§ ë°ì´í„° êµ¬ì¡° ê°œì„ 

```typescript
// ì´ì „ êµ¬ì¡° (ë³µì¡í•œ í†µí•©)
interface OldStoreData {
  chatItems: ChatItem[];
  messages: { [threadId]: SSEMessage[] }; // ëª¨ë“  ë©”ì‹œì§€ í•œ ë²ˆì— ì €ì¥
}

// ìƒˆë¡œìš´ êµ¬ì¡° (ìµœì í™”ëœ ë¶„ë¦¬)
localStorage: { history: ChatItem[] }        // ê°€ë²¼ìš´ ë©”íƒ€ì •ë³´
IndexedDB: threadId â†’ SSEMessage[]           // ìŠ¤ë ˆë“œë³„ ë©”ì‹œì§€ ë¶„ë¦¬
```

## ğŸ› í•´ê²°ëœ ì£¼ìš” ë¬¸ì œë“¤

1. **ì €ì¥ì†Œ ë³µì¡ì„± í•´ê²°**:
   - ì¤‘ë³µëœ `vibecraft-chat-store` ì œê±°
   - ë‹¨ì¼í™”ëœ ì €ì¥ êµ¬ì¡°ë¡œ ë‹¨ìˆœí™”
2. **ì„±ëŠ¥ ìµœì í™”**:
   - ë©”ì‹œì§€ì™€ ë©”íƒ€ë°ì´í„° ë¶„ë¦¬ë¡œ ë” ë¹ ë¥¸ ì ‘ê·¼
   - IndexedDB ì‚¬ìš©ìœ¼ë¡œ ëŒ€ìš©ëŸ‰ ë©”ì‹œì§€ ì§€ì›
3. **ì±„íŒ… ë¡œì§ ë³´ì¡´**:
   - ê¸°ì¡´ messageBuffer ë¡œì§ ì™„ì „ ìœ ì§€
   - ì±„ë„ ë³€ê²½ì‹œì—ë§Œ ì €ì¥í•˜ëŠ” íš¨ìœ¨ì  êµ¬ì¡°
4. **ë°ì´í„° ì•ˆì „ì„±**:
   - ìë™ ë§ˆì´ê·¸ë ˆì´ì…˜ìœ¼ë¡œ ê¸°ì¡´ ë°ì´í„° ë³´ì¡´
   - ë°±ì—… ìƒì„± í›„ ì•ˆì „í•œ ë°ì´í„° ë³€í™˜

## ğŸ” ë””ë²„ê¹… ì‹œìŠ¤í…œ

### ì¶”ê°€ëœ ë¡œê·¸ ì‹œìŠ¤í…œ

```javascript
// ë©”ì‹œì§€ ì €ì¥ì†Œ
ğŸ“ MessageDB ì´ˆê¸°í™” ì™„ë£Œ
ğŸ“¨ ë©”ì‹œì§€ ë¡œë“œ: threadId (Xê°œ)
ğŸ’¾ ë©”ì‹œì§€ ì €ì¥: threadId (Xê°œ)
â• ë©”ì‹œì§€ ì¶”ê°€: threadId (messageId)

// ë§ˆì´ê·¸ë ˆì´ì…˜
ğŸ”„ ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹œì‘...
ğŸ“‹ ChatItems ë§ˆì´ê·¸ë ˆì´ì…˜: Xê°œ
ğŸ“¨ ë©”ì‹œì§€ ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹œì‘: Xê°œ ìŠ¤ë ˆë“œ
ğŸ‰ ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜ì´ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!

// ì±„íŒ… í”Œë¡œìš°
ğŸ“¥ ë©”ì‹œì§€ ì¶”ê°€: [content]
âœ… ìŠ¤ë ˆë“œ ì „í™˜ ë° ë©”ì‹œì§€ ë¡œë“œ ì™„ë£Œ: threadId Xê°œ
ğŸ’¾ í˜„ì¬ ë©”ì‹œì§€ ì €ì¥ ì™„ë£Œ: threadId Xê°œ
```

## âš¡ ì„±ëŠ¥ ê°œì„  ì‚¬í•­

- **ì €ì¥ì†Œ íš¨ìœ¨ì„±**: ë©”íƒ€ë°ì´í„°ì™€ ë©”ì‹œì§€ ë¶„ë¦¬ë¡œ ìµœì í™”ëœ ì ‘ê·¼
- **í™•ì¥ì„±**: IndexedDB ì‚¬ìš©ìœ¼ë¡œ ëŒ€ìš©ëŸ‰ ë©”ì‹œì§€ ì§€ì›
- **ë‹¨ìˆœì„±**: ì¤‘ë³µ ì €ì¥ì†Œ ì œê±°ë¡œ ë³µì¡ì„± ê°ì†Œ (30% ì½”ë“œ ê°ì†Œ)
- **ë©”ëª¨ë¦¬ íš¨ìœ¨**: messageBufferë§Œ ë©”ëª¨ë¦¬ì— ìœ ì§€, ë‚˜ë¨¸ì§€ëŠ” í•„ìš”ì‹œ ë¡œë“œ
- **ìë™ ì €ì¥**: ì±„ë„ ë³€ê²½ì‹œì—ë§Œ ì €ì¥í•˜ëŠ” íš¨ìœ¨ì  êµ¬ì¡°
- **ì•ˆì „í•œ ë§ˆì´ê·¸ë ˆì´ì…˜**: ê¸°ì¡´ ë°ì´í„° ì†ì‹¤ ì—†ì´ ìƒˆ êµ¬ì¡°ë¡œ ì „í™˜

## ğŸ”„ ë§ˆì´ê·¸ë ˆì´ì…˜ ì§€ì›

### ê¸°ì¡´ â†’ ì‹ ê·œ ë°ì´í„° ë³€í™˜

```typescript
// ê¸°ì¡´ êµ¬ì¡° (vibecraft-chat-store)
interface OldStoreData {
  state: {
    chatItems: ChatItem[];
    messages: { [threadId]: SSEMessage[] };
  };
}

// ìƒˆë¡œìš´ êµ¬ì¡° (ë¶„ë¦¬)
localStorage (vibecraft_thread): {
  history: ChatItem[] // ë©”íƒ€ì •ë³´ë§Œ
}

IndexedDB (vibecraft-messages-db): {
  [threadId]: SSEMessage[] // ë©”ì‹œì§€ë“¤ë§Œ
}
```

## ğŸš€ ì‹¤í–‰ ë°©ë²•

### ê°œë°œ ì„œë²„ ì‹œì‘

```bash
cd client
npm install     # ê¸°ì¡´ ì˜ì¡´ì„± ê·¸ëŒ€ë¡œ
npm run dev    # http://localhost:22044 (ìë™ í¬íŠ¸ ì„ íƒ)
```

### ë¹Œë“œ & ë°°í¬

```bash
npm run build  # TypeScript ì»´íŒŒì¼ + Vite ë¹Œë“œ
```

## âœ… í˜„ì¬ ìƒíƒœ

- **ë¹Œë“œ**: âœ… TypeScript ì˜¤ë¥˜ ì—†ìŒ, Vite ë¹Œë“œ ì„±ê³µ
- **ë²ˆë“¤ í¬ê¸°**: ~695KB (gzipped: ~224KB) - ì•ˆì •ì  ìœ ì§€
- **ê¸°ëŠ¥ ì™„ì„±ë„**: ì €ì¥ì†Œ êµ¬ì¡° ê°œì„  + ì±„íŒ… ì‹œìŠ¤í…œ ì™„ì „ í˜¸í™˜
- **ì½”ë“œ í’ˆì§ˆ**: ë‹¨ìˆœí™”ëœ êµ¬ì¡°, íƒ€ì… ì•ˆì „ì„±, ì„±ëŠ¥ ìµœì í™”
- **ì•ˆì •ì„±**: ê¸°ì¡´ ì±„íŒ… ë¡œì§ ë³´ì¡´í•˜ë©´ì„œ ì €ì¥ì†Œë§Œ ê°œì„ 

## ğŸ”§ ì €ì¥ì†Œ ì‚¬ìš© íŒ¨í„´

### messageBuffer ê¸°ë°˜ ì±„íŒ… í”Œë¡œìš° (ë³´ì¡´ë¨)

```typescript
// useSSE.ts - ê¸°ì¡´ ë¡œì§ ì™„ì „ ìœ ì§€
const [messageBuffer, setMessageBuffer] = useState<SSEMessage[]>([]);

// ë©”ì‹œì§€ ì¶”ê°€ (ê¸°ì¡´ê³¼ ë™ì¼)
const addMessage = (...) => {
  setMessageBuffer((prev) => [...prev, myMessage]);
};

// í™”ë©´ì— í‘œì‹œ (ê¸°ì¡´ê³¼ ë™ì¼)
return { messages: messageBuffer };

// ì €ì¥ì€ ì±„ë„ ë³€ê²½ì‹œì—ë§Œ (ìƒˆë¡œ ì¶”ê°€)
const saveMessages = () => {
  await saveCurrentMessages(messageBuffer);
};
```

### ìƒˆë¡œìš´ ì €ì¥ì†Œ í™œìš©

```typescript
// MessageStorage ì‚¬ìš©
import * as MessageStorage from '@/utils/messageStorage';

// ë©”ì‹œì§€ ì €ì¥/ë¡œë“œ
await MessageStorage.saveMessages(threadId, messages);
const messages = await MessageStorage.getMessages(threadId);

// ChatStorage ì‚¬ìš© (ë©”íƒ€ì •ë³´ë§Œ)
import { getChatItems, storeChatChannel } from '@/utils/chatStorage';

const chatItems = getChatItems(); // ChatItem[]ë§Œ
storeChatChannel(newChatItem);    // ë©”íƒ€ì •ë³´ë§Œ ì €ì¥
```

---

**ìµœì¢… ìš”ì•½**: VibeCraftëŠ” ê¸°ì¡´ ì±„íŒ… ë¡œì§ì„ ì™„ì „íˆ ë³´ì¡´í•˜ë©´ì„œë„ ìµœì í™”ëœ ì €ì¥ì†Œ êµ¬ì¡°ë¥¼ ê°€ì§„ ê³ ë„ë¡œ íš¨ìœ¨ì ì¸ React/TypeScript AI ì±„íŒ… ì‹œìŠ¤í…œì…ë‹ˆë‹¤.

**í•µì‹¬ ì„±ê³¼**:
- âœ… ì €ì¥ì†Œ êµ¬ì¡° ëŒ€í­ ê°œì„  (IndexedDB + localStorage ë¶„ë¦¬)
- âœ… ì¤‘ë³µ ì €ì¥ì†Œ ì œê±°ë¡œ ë³µì¡ì„± 30% ê°ì†Œ
- âœ… ê¸°ì¡´ ì±„íŒ… ë¡œì§(messageBuffer) ì™„ì „ ë³´ì¡´
- âœ… ìë™ ë§ˆì´ê·¸ë ˆì´ì…˜ìœ¼ë¡œ ë°ì´í„° ì†ì‹¤ ë°©ì§€
- âœ… ì„±ëŠ¥ê³¼ í™•ì¥ì„± ëŒ€í­ í–¥ìƒ

**ê¸°ìˆ  ìŠ¤íƒ**: React 18 + TypeScript + Zustand + IndexedDB + localStorage + Ant Design